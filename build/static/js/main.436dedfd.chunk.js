(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{186:function(e,t,a){},187:function(e,t,a){},215:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},229:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),s=a.n(c),i=(a(186),a(187),a(12)),o=a.n(i),u=a(18),l=a(6),d=a(29),p=a(21),j=a(16),b=a.n(j),m=a(3),f=a(7),h=a(5),x=a(27),O=a(289),v=a(23),g=Object(n.createContext)(null),w=a(241),k=(a(215),a(288)),y=a(33),C=a.n(y),S=a(287),D=a(1),I=Object(h.a)(x.c)((function(e){var t=e.theme;return{"label + &":{marginTop:t.spacing(3)},"& .MuiInputBase-input":{position:"relative",backgroundColor:"white",border:"1px solid #D9D9D6",borderRadius:"10px",width:"100%",padding:"10px 15px",transition:t.transitions.create(["border-color","background-color","box-shadow","border-width"])}}}));function T(){var e,t=Object(v.useToasts)().addToast,a=Object(n.useContext)(g).setLoginStatus,c=Object(p.f)(),s=Object(n.useState)(""),i=Object(l.a)(s,2),d=i[0],j=i[1],h=r.a.useState({password:"",showPassword:!1}),x=Object(l.a)(h,2),y=x[0],T=x[1],P=function(){var e=Object(u.a)(o.a.mark((function e(){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.password,"superadmin"!==d||"superadmin"!==n){e.next=4;break}return c.push("/admin"),e.abrupt("return");case 4:if(d){e.next=7;break}return t("Ingrese su E-mail",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 7:if(n){e.next=10;break}return t("Please Enter Password",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 10:return r={email:d,password:n},e.next=13,b.a.post("/users/login",r);case 13:if("No User"!==(s=e.sent).data.status){e.next=17;break}return t(s.data.msg,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 17:if("Wrong Password"!==s.data.status){e.next=20;break}return t(s.data.msg,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 20:if("No Active"!==s.data.status){e.next=23;break}return t(s.data.msg,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 23:a({token:s.data.token,email:s.data.email,customerId:""}),localStorage.setItem("auth-token",s.data.token),c.push("/translist");case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(S.a,{sx:{height:"100vh",backgroundColor:"#1a1938"},children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){c.push("/")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsxs)("div",{className:"reg-item",children:[Object(D.jsx)("p",{className:"title",children:"Sign In"}),Object(D.jsx)(I,{placeholder:"Email",sx:{width:"90%",my:"14px",mt:"25px"},value:d,onChange:function(e){return j(e.target.value)}}),Object(D.jsx)(I,{placeholder:"Password",sx:{width:"90%",marginBottom:"14px"},type:y.showPassword?"text":"password",value:y.password,onChange:(e="password",function(t){T(Object(f.a)(Object(f.a)({},y),{},Object(m.a)({},e,t.target.value)))}),label:"Password"}),Object(D.jsxs)("div",{className:"bt-home",children:[Object(D.jsx)(O.a,{sx:{backgroundColor:"transparent",width:"70%",color:"#0dcaf0",p:2,mt:"20%"},color:"primary",variant:"filled",onClick:P,children:"L O G I N"}),Object(D.jsx)(w.a,{variant:"subtitle2",children:"Olvidaste la contrase\xf1a?"})]})]})]})}var P=a(46),E="SAVE_EMAIL",N="SEL_DATA",_="SLIDE_DATA",z=function(e){return{type:_,payload:e}},A=(a(223),Object(h.a)(x.c)((function(e){var t=e.theme;return{"label + &":{marginTop:t.spacing(3)},"& .MuiInputBase-input":{position:"relative",borderRadius:"10px",backgroundColor:"white",border:"1px solid #D9D9D6",padding:"12px 16px",transition:t.transitions.create(["border-color","background-color","box-shadow","border-width"])}}})));function R(){var e,t=Object(P.b)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],d=r.a.useState({password:"",showPassword:!1}),j=Object(l.a)(d,2),h=j[0],x=j[1],w=r.a.useState({repassword:"",showRePassword:!1}),y=Object(l.a)(w,2),I=y[0],T=y[1],N=Object(v.useToasts)().addToast,_=Object(n.useContext)(g).setLoginStatus,z=Object(p.f)(),R=function(){var e=Object(u.a)(o.a.mark((function e(){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.password,n=I.repassword,s){e.next=5;break}return N("Please Enter Email",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 5:if(a===n){e.next=8;break}return N("Please Confirm Password",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 8:return r={email:s,password:a},e.next=11,b.a.post("/users/register",r);case 11:200===(c=e.sent).data.status?(_(!0),t({type:E,payload:{email:s,customerId:""}}),z.push("/login")):N(c.data.msg,{appearance:"error",autoDismiss:!0});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(S.a,{sx:{height:"100vh",backgroundColor:"#1a1938"},children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){z.push("/")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsx)("div",{className:"top-bar"}),Object(D.jsxs)("div",{className:"reg-item",children:[Object(D.jsx)("p",{className:"title",children:"Sign up"}),Object(D.jsx)(A,{placeholder:"Email",type:"email",sx:{width:"90%",my:"14px",mt:"25px"},value:s,onChange:function(e){return i(e.target.value)}}),Object(D.jsx)(A,{placeholder:"Password",sx:{width:"90%",marginBottom:"14px"},type:h.showPassword?"text":"password",value:h.password,onChange:(e="password",function(t){x(Object(f.a)(Object(f.a)({},h),{},Object(m.a)({},e,t.target.value)))}),label:"Password"}),Object(D.jsx)(A,{placeholder:"Confirm Password",sx:{width:"90%",marginBottom:"14px"},type:I.showRePassword?"text":"password",value:I.repassword,onChange:function(e){return function(t){T(Object(f.a)(Object(f.a)({},I),{},Object(m.a)({},e,t.target.value)))}}("repassword"),label:"Password"}),Object(D.jsx)("div",{className:"bt-home",style:{marginTop:"40px"},children:Object(D.jsx)(O.a,{sx:{backgroundColor:"transparent",color:"#0dcaf0",p:3,width:"70%"},color:"primary",variant:"filled",onClick:R,children:"R e g i s t e r"})})]})]})}var L=a(283),W=a.p+"static/media/fino.51ff789f.png",M=a(290);function F(){var e=Object(p.f)();return Object(D.jsx)(S.a,{sx:{height:"100vh",backgroundColor:"#1a1938"},children:Object(D.jsxs)(L.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",sx:{px:3,pt:10},children:[Object(D.jsx)(L.a,{item:!0,children:Object(D.jsx)("img",{src:W,alt:"logo",width:"130px"})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:2},children:Object(D.jsx)(w.a,{variant:"h4",sx:{textAlign:"center",color:"#fff"},children:"Bienvenido a Fino"})}),Object(D.jsx)(L.a,{item:!0,children:Object(D.jsx)(w.a,{variant:"subtitle1",style:{textAlign:"center",color:"#ffffff6e"},children:"Emite tus facturas y boletas de una manera f\xe1cil, r\xe1pida y segura usando t\xfa tel\xe9fono."})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:1,width:"100%"},children:Object(D.jsxs)(M.a,{orientation:"vertical","aria-label":"vertical contained button group",sx:{width:"80%"},children:[Object(D.jsx)(O.a,{sx:{backgroundColor:"transparent",color:"#0dcaf0",p:2},color:"primary",variant:"contained",onClick:function(){return e.push("/register")},children:"R e g i s t e r"}),Object(D.jsx)(O.a,{sx:{backgroundColor:"transparent",color:"#0dcaf0",p:2},color:"primary",variant:"contained",onClick:function(){return e.push("/login")},children:"L o g i n"})]})})]})})}var B=a(17),V=(a(224),a(149)),U=a.n(V),H=a(150),q=a.n(H),Y=a(280),G=a(294);function J(e){var t=Object(P.b)(),a=Object(n.useState)(0),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)("0"),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(0),j=Object(l.a)(p,2),b=j[0],m=j[1],f=Object(n.useState)(1),h=Object(l.a)(f,2),x=h[0],O=h[1],v=Object(n.useState)(""),g=Object(l.a)(v,2),w=g[0],y=g[1];Object(n.useEffect)((function(){""===u&&d("0"),46===u.slice(0).charCodeAt(0)&&d((function(e){return Number(e).toFixed(2)})),s(4+1.3*u.toString().length),m(u),u.toString().includes(".")&&m((function(e){return Number(e).toFixed(2)}))}),[u]);var C=e.index;return Object(n.useEffect)((function(){return t(z({index:C,count:x,amount:u,description:w})),function(){t(z({index:0,count:1,amount:"",description:""}))}}),[u,x,t,C,w]),Object(D.jsxs)(L.a,{container:!0,direction:"column",justifyContent:" space-between",alignItems:"center",spacing:1,children:[Object(D.jsxs)(L.a,{item:!0,children:[Object(D.jsx)(k.a,{"aria-label":"minus",sx:{mx:3},onClick:function(){O((function(e){return e>=2?e-1:e}))},children:Object(D.jsx)(U.a,{color:"primary"})}),Object(D.jsx)("span",{className:"count",children:x}),Object(D.jsx)(k.a,{"aria-label":"plus",sx:{mx:3},onClick:function(){O((function(e){return e+1}))},children:Object(D.jsx)(q.a,{color:"primary"})})]}),Object(D.jsx)(L.a,{item:!0,className:"compose",placeholder:u?b:0,children:Object(D.jsx)(Y.a,{variant:"standard",id:"filled-start-adornment",sx:{m:1,pl:0,width:c+"em",maxWidth:"100%"},InputProps:{startAdornment:Object(D.jsx)(G.a,{position:"start",children:Object(D.jsx)("p",{className:"adorment",children:"S/"})}),disableUnderline:!0,style:{fontSize:58}},onChange:function(e){e.preventDefault();var t=e.target.value.toString().match(/^[0-9]*(\.\d{0,2})?$/);if(t&&t[0]<=99999.99&&(d((function(a){return t?e.target.value:a})),"0"===e.target.value.slice(0,1)))if("0."===e.target.value.slice(0,2));else{var a=e.target.value.slice(1);d(a)}},value:u})}),Object(D.jsx)(L.a,{item:!0,sx:{width:"90%"},children:Object(D.jsx)(Y.a,{placeholder:"Description",variant:"standard",InputProps:{inputProps:{style:{textAlign:"center"}}},onChange:function(e){return y(e.target.value)},fullWidth:!0,focused:!0})})]})}var X=a(275),K=a(284),Q=a(295),Z=a(73),$=(a(145),function(e,t,a){var n=new Date,r={contribuyente:{token_contribuyente:a.token?a.token:"SC4H9H0U2TXE1NYU4P0KRJIETM2QZ1MMYMM9X",id_usuario_vendedor:a.vendor?a.vendor:0,tipo_proceso:a.process?a.process:"prueba",tipo_envio:"inmediato"},cliente:{tipo_docidentidad:8===t.doc.length?1:11===t.doc.length?6:0,numerodocumento:t.doc,nombre:t.name,email:"",direccion:t.direction,ubigeo:"",sexo:"",fecha_nac:"",celular:""},cabecera_comprobante:{tipo_documento:"invoice"===t.type?"01":"ticket"===t.type?"03":"note"===t.type?"77":void 0,moneda:"PEN",idsucursal:a.branch?a.branch:23,id_condicionpago:"0",fecha_comprobante:"".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()),nro_placa:"",nro_orden:"",guia_remision:"",descuento_monto:0,observacion:"",descuento_porcentaje:""},detalle:[]};return e.map((function(e,t){e.index===t&&(1===e.count&&"0"===e.amount||""===e.amount||r.detalle.push({idproducto:0,codigo:"000",afecto_icbper:"no",id_tipoafectacionigv:10,descripcion:e.description,idunidadmedida:"NIU",precio_venta:e.amount,cantidad:e.count}))})),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}});function ee(){var e=Object(n.useContext)(g),t=e.setPdf,a=e.setConf,r=e.setLoginStatus,c=Object(n.useState)({amount:"",name:"",doc:"",direction:"",sellerId:"",customerId:"",type:"",pdfLink:""}),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(v.useToasts)().addToast,h=Object(p.f)(),x=Object(n.useState)(!1),w=Object(l.a)(x,2),y=w[0],I=w[1],T=Object(n.useState)({invoice:!1,ticket:!1,note:!1}),E=Object(l.a)(T,2),N=E[0],_=E[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("auth-token"),n=localStorage.getItem("customerId"),""!==a||n){e.next=5;break}return h.push("/"),e.abrupt("return");case 5:return e.next=7,b.a.post("/users/tokenIsValid",null,{headers:{"x-auth-token":a}});case 7:if(!e.sent.data){e.next=16;break}return e.next=11,b.a.get("/users/",{headers:{"x-auth-token":a}});case 11:c=e.sent,r({token:a,email:c.data.email,customerId:n}),t(""),b.a.get("/customers/get/"+n).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(Object(f.a)(Object(f.a)({},i),{},{name:t.data[0].name,doc:t.data[0].doc,customerId:t.data[0]._id,direction:t.data[0].direction,sellerId:t.data[0].sellerId})),8===t.data[0].doc.length&&I(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b.a.get("/users/getId/"+c.data.email).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(f.a)(Object(f.a)({},N),{},{invoice:t.data.docType[0],ticket:t.data.docType[1],note:t.data.docType[2]})),!t.data.docType[0]||t.data.docType[1]||t.data.docType[2]||(b.a.get("/customers/get/"+n).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(Object(f.a)(Object(f.a)({},i),{},{name:t.data[0].name,doc:t.data[0].doc,customerId:t.data[0]._id,direction:t.data[0].direction,sellerId:t.data[0].sellerId,type:"invoice"})),8===t.data[0].doc.length&&I(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_(Object(f.a)(Object(f.a)({},N),{},{invoice:!1}))),t.data.docType[0]||!t.data.docType[1]||t.data.docType[2]||(b.a.get("/customers/get/"+n).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(Object(f.a)(Object(f.a)({},i),{},{name:t.data[0].name,doc:t.data[0].doc,customerId:t.data[0]._id,direction:t.data[0].direction,sellerId:t.data[0].sellerId,type:"ticket"})),8===t.data[0].doc.length&&I(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_(Object(f.a)(Object(f.a)({},N),{},{ticket:!1}))),t.data.docType[0]||t.data.docType[1]||!t.data.docType[2]||(b.a.get("/customers/get/"+n).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(Object(f.a)(Object(f.a)({},i),{},{name:t.data[0].name,doc:t.data[0].doc,customerId:t.data[0]._id,direction:t.data[0].direction,sellerId:t.data[0].sellerId,type:"note"})),8===t.data[0].doc.length&&I(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_(Object(f.a)(Object(f.a)({},N),{},{note:!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var z=Object(n.useState)(2),A=Object(l.a)(z,2),R=A[0],W=A[1],M=Object(P.c)((function(e){return e.slide})),F=Object(n.useState)([]),V=Object(l.a)(F,2),U=V[0],H=V[1],q=[],Y=function(){for(var e=function(e){q.push(U.filter((function(t){return t.index===e})).pop())},t=0;t<R-1;t++)e(t)},G=Object(n.useState)(0),ee=Object(l.a)(G,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){H((function(e){return[].concat(Object(B.a)(e),[M])}))}),[M]),Object(n.useEffect)((function(){Y(),function(){for(var e=0,t=0;t<q.length;t++)void 0===q[t]||(e+=q[t].count*Number(q[t].amount));ae(e.toFixed(2))}()}),[U]),Object(n.useEffect)((function(){d(Object(f.a)(Object(f.a)({},i),{},{amount:te.toString()}))}),[te]);function ne(){return(ne=Object(u.a)(o.a.mark((function e(n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("note"===r?"https://facturavirtual.pe/facturacion/api/procesar_nota_venta":"https://facturavirtual.pe/facturacion/api/procesar_venta",n).then((function(e){return e.json()})).then((function(e){var a=e.url_absoluta_ticket;t(a.toString());var n=Object(f.a)(Object(f.a)({},i),{},{pdfLink:a.toString()});return d(Object(f.a)(Object(f.a)({},i),{},{pdfLink:a.toString()})),n})).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.post("/trans/create",t).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status&&(a(!0),h.push({pathname:"/confirm/"+i.amount}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){j("Some errors occured",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return function(){ae(0),q.fill(null),H(null),W(2),I(!1)}}),[]),Object(D.jsx)(S.a,{sx:{flexGrow:1,width:"100%",height:"100vh",backgroundColor:"white"},children:Object(D.jsxs)(L.a,{container:!0,direction:"column",justifyContent:"space-between",alignItems:"center",children:[Object(D.jsxs)(L.a,{item:!0,container:!0,direction:"row",sx:{mt:5},justifyContent:"center",alignItems:"center",children:[Object(D.jsx)("p",{className:"name",children:i.name}),Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){h.push("/customer")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})})]}),Object(D.jsx)(L.a,{item:!0,children:Object(D.jsx)("p",{className:"doc",children:i.doc})}),Object(D.jsx)(L.a,{sx:{width:"100%",pt:2},item:!0,children:Object(D.jsx)(Z.a,{spaceBetween:0,slidesPerView:1,onReachEnd:function(){W((function(e){return e+1}))},children:new Array(R).fill(null).map((function(e,t){return Object(D.jsx)(Z.b,{children:Object(D.jsx)(J,{index:t})},t)}))})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:2},children:Object(D.jsxs)(K.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",sx:{pl:2},children:[!y&&N.invoice&&Object(D.jsx)(Q.a,{name:"type",value:"invoice",control:Object(D.jsx)(X.a,{size:"small"}),label:"Invoice",onChange:function(e){return d(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))}}),N.ticket&&Object(D.jsx)(Q.a,{name:"type",value:"ticket",control:Object(D.jsx)(X.a,{size:"small"}),label:"Ticket",onChange:function(e){return d(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))}}),N.note&&Object(D.jsx)(Q.a,{name:"type",value:"note",control:Object(D.jsx)(X.a,{size:"small"}),label:"Note",onChange:function(e){return d(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))}})]})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:2},children:Object(D.jsxs)("p",{className:"total",children:["Total S/",te]})}),Object(D.jsx)(L.a,{item:!0,sx:{width:"60%"},children:Object(D.jsx)(O.a,{onClick:function(){if(i.amount)if(Y(),void 0!==q[0]){for(var e=0;e<q.length;e++)if(1===q[e].count&&"0"===q[e].amount);else{if(""===q[e].description)return void j("Please Enter Description",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"});if("0"===q[e].amount)return void j("Please Enter amount",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"})}i.type?(t("http://example.com"),b.a.get("/users/get/"+i.sellerId).then((function(e){!function(e,t){ne.apply(this,arguments)}($(q,i,e.data),i.type)}))):j("Please Select Type",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"})}else j("Please Enter Description",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"});else j("Please Enter Amount",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"})},fullWidth:!0,variant:"contained",children:""===i.type?"Send":i.type.toUpperCase()})})]})})}var te=a(296),ae=a(299),ne=a(297),re=a(298),ce=a(272);a(225);function se(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(v.useToasts)().addToast,i=Object(p.f)();Object(n.useEffect)((function(){return b.a.get("/users/all").then((function(e){for(var t=[],a=0;a<e.data.length;a++){var n;n={id:e.data[a].id,name:e.data[a].name,ruc:e.data[a].ruc,branch:e.data[a].branch,vendor:e.data[a].vendor,process:e.data[a].process,credit:e.data[a].credit,paid:e.data[a].paid,token:e.data[a].token,email:e.data[a].email,active_status:e.data[a].active_status},t.push(n)}c(t)})),function(){c([])}}),[i]);var o=r.a.useState(""),u=Object(l.a)(o,2),d=u[0],j=u[1],m=function(){j("")};return Object(D.jsxs)("div",{className:"admin",children:[Object(D.jsx)("div",{children:Object(D.jsx)(k.a,{onClick:function(){i.push("/")},children:Object(D.jsx)("i",{className:"fas fa-sign-out-alt fa-rotate-180"})})}),Object(D.jsx)("i",{className:"fas fa-user-plus",onClick:function(){i.push("/admin/new")}}),Object(D.jsxs)("table",{className:"table table-hover",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"No"}),Object(D.jsx)("th",{children:"Ruc"}),Object(D.jsx)("th",{children:"Action"})]})}),Object(D.jsx)("tbody",{children:a.map((function(e,t){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:t+1}),Object(D.jsx)("td",{children:e.ruc}),Object(D.jsxs)("td",{children:[Object(D.jsx)(k.a,{size:"small",onClick:function(){return t=e.id,void i.push({pathname:"/admin/edit/"+t});var t},children:Object(D.jsx)("i",{className:"fas fa-pen"})}),Object(D.jsx)(k.a,{size:"small",onClick:function(){return t=e.id,void j(t);var t},children:Object(D.jsx)("i",{className:"fas fa-trash-alt"})}),e.active_status?Object(D.jsx)(k.a,{size:"small",onClick:function(){return t=e.id,void b.a.get("/users/deactive/"+t).then((function(e){for(var t=[],a=0;a<e.data.length;a++){var n;n={id:e.data[a].id,name:e.data[a].name,ruc:e.data[a].ruc,branch:e.data[a].branch,vendor:e.data[a].vendor,process:e.data[a].process,credit:e.data[a].credit,paid:e.data[a].paid,token:e.data[a].token,email:e.data[a].email,active_status:e.data[a].active_status},t.push(n)}c(t),s("Success, Deactivation",{appearance:"success",autoDismiss:!0})}));var t},children:Object(D.jsx)("i",{className:"fas fa-lock"})}):Object(D.jsx)(k.a,{size:"small",onClick:function(){return t=e.id,void b.a.get("/users/active/"+t).then((function(e){for(var t=[],a=0;a<e.data.length;a++){var n;n={id:e.data[a].id,name:e.data[a].name,ruc:e.data[a].ruc,branch:e.data[a].branch,vendor:e.data[a].vendor,process:e.data[a].process,credit:e.data[a].credit,paid:e.data[a].paid,token:e.data[a].token,email:e.data[a].email,active_status:e.data[a].active_status},t.push(n)}c(t),s("Success, Activation",{appearance:"success",autoDismiss:!0})}));var t},children:Object(D.jsx)("i",{className:"fas fa-lock-open"})})]})]},t)}))})]}),Object(D.jsxs)(te.a,{open:!!d,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(ce.a,{id:"alert-dialog-title",children:"Caution"}),Object(D.jsx)(ne.a,{children:Object(D.jsx)(re.a,{id:"alert-dialog-description",children:"All data will be deleted."})}),Object(D.jsxs)(ae.a,{children:[Object(D.jsx)(O.a,{onClick:m,children:"Cancel"}),Object(D.jsx)(O.a,{onClick:function(){return function(e){var t=a;b.a.delete("/users/delete/"+e).then((function(e){if("success"===e.data.msg){for(var a=e.data.del_id,n=Object.keys(t).length,r=[],i=0;i<n;i++){var o=[];a!==t[i].id&&(o={id:t[i].id,name:t[i].name,ruc:t[i].ruc,branch:t[i].branch,vendor:t[i].vendor,process:t[i].process,credit:t[i].credit,paid:t[i].paid,token:t[i].token,email:t[i].email,active_status:t[i].active_status},r.push(o))}c(r),s("Deleted Successfully",{appearance:"success",autoDismiss:!0})}else s("Sorry, Operation is failure",{appearance:"error",autoDismiss:!0})})),m()}(d)},autoFocus:!0,children:"Okay"})]})]})]})}var ie=a(281),oe=a(278),ue=a(292),le=a(274),de=a(279);function pe(){var e=Object(p.g)().id,t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),d=i[0],j=i[1],h=Object(n.useState)(""),x=Object(l.a)(h,2),g=x[0],w=x[1],y=Object(n.useState)(""),I=Object(l.a)(y,2),T=I[0],P=I[1],E=Object(n.useState)(""),N=Object(l.a)(E,2),_=N[0],z=N[1],A=Object(n.useState)(""),R=Object(l.a)(A,2),L=R[0],W=R[1],M=Object(n.useState)(""),F=Object(l.a)(M,2),B=F[0],V=F[1],U=Object(n.useState)(""),H=Object(l.a)(U,2),q=H[0],G=H[1],J=Object(n.useState)(""),X=Object(l.a)(J,2),K=X[0],Z=X[1],$=Object(n.useState)({invoice:!1,ticket:!1,note:!1}),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=function(e){ae(Object(f.a)(Object(f.a)({},te),{},Object(m.a)({},e.target.name,e.target.checked)))},re=Object(v.useToasts)().addToast,ce=Object(p.f)(),se=function(){var t=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return re("Please Enter Name",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 3:if(d){t.next=6;break}return re("Please Enter Ruc",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 6:if(g){t.next=9;break}return re("Please Enter Id Sucursal",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 9:if(T){t.next=12;break}return re("Please Enter Token",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 12:if(_){t.next=15;break}return re("Please Enter Email",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 15:if(B){t.next=18;break}return re("Please Enter Id Vendor",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 18:if(q){t.next=21;break}return re("Please Enter Tipo Proceso",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 21:if(L){t.next=24;break}return re("Please Enter Credit",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 24:if(K){t.next=27;break}return re("Please Enter Paid",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 27:if(te.invoice||te.ticket||te.note){t.next=30;break}return re("Please Check Doc Types",{appearance:"error",autoDismiss:!0}),t.abrupt("return");case 30:return a={id:e,name:r,ruc:d,branch:g,token:T,email:_,vendor:B,process:q,credit:L,paid:K,docType:te},t.next=33,b.a.put("/users/update",a);case 33:200===(n=t.sent).status?ce.push("/admin"):re(n.data.msg,{appearance:"error",autoDismiss:!0});case 35:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){b.a.get("/users/get/"+e).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.data.name),j(t.data.ruc),w(t.data.branch),P(t.data.token),W(t.data.credit),V(t.data.vendor),G(t.data.process?t.data.process:"prueba"),Z(t.data.paid),z(t.data.email),ae(Object(f.a)(Object(f.a)({},te),{},{invoice:t.data.docType[0],ticket:t.data.docType[1],note:t.data.docType[2]}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(D.jsxs)(S.a,{component:"form",sx:{display:"flex",flexWrap:"wrap",p:3},noValidate:!0,autoComplete:"on",children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){ce.push("/admin")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsxs)("div",{children:[Object(D.jsx)(ie.a,{sx:{my:1,color:"#1976d2",fontWeight:"600"},children:"Edit User"}),Object(D.jsx)(Y.a,{required:!0,autoComplete:"email",variant:"standard",label:"Name",focused:!0,size:"small",fullWidth:!0,sx:{mb:1},value:r,onChange:function(e){return c(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Ruc",type:"number",variant:"standard",size:"small",sx:{mr:1,my:1,width:"60%"},value:d,onChange:function(e){return j(e.target.value)},focused:!0}),Object(D.jsx)(Y.a,{label:"Id Sucursal",variant:"standard",type:"number",size:"small",sx:{ml:1,my:1,width:"35%"},value:g,onChange:function(e){return w(e.target.value)},focused:!0}),Object(D.jsx)(Y.a,{label:"Token",size:"small",variant:"standard",focused:!0,fullWidth:!0,sx:{my:1},value:T,onChange:function(e){return P(e.target.value)}}),Object(D.jsx)(Y.a,{required:!0,label:"Email",size:"small",variant:"standard",fullWidth:!0,sx:{my:1},focused:!0,value:_,onChange:function(e){return z(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Id Vendor",type:"number",variant:"standard",size:"small",sx:{my:1,mr:1,width:"40%"},focused:!0,value:B,onChange:function(e){return V(e.target.value)}}),Object(D.jsxs)(ue.a,{sx:{my:1,ml:1,width:"55%"},size:"small",focused:!0,variant:"standard",children:[Object(D.jsx)(ie.a,{children:"Tipo Proceso"}),Object(D.jsxs)(le.a,{value:q,onChange:function(e){return G(e.target.value)},label:"Age",children:[Object(D.jsx)(oe.a,{value:"prueba",children:"Prueba"}),Object(D.jsx)(oe.a,{value:"other",children:"Other"})]})]}),Object(D.jsx)(Y.a,{label:"Id Credit",type:"number",variant:"standard",sx:{my:1,mr:2,width:"45%"},size:"small",focused:!0,value:L,onChange:function(e){return W(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Id Paid",type:"number",variant:"standard",sx:{my:1,ml:2,width:"45%"},size:"small",focused:!0,value:K,onChange:function(e){return Z(e.target.value)}}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:te.invoice,onChange:ne,name:"invoice",size:"small"}),label:"Invoice"}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:te.ticket,onChange:ne,name:"ticket",size:"small"}),label:"Ticket"}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:te.note,onChange:ne,name:"note",size:"small"}),label:"Note"}),Object(D.jsx)(O.a,{onClick:se,variant:"contained",sx:{my:2,width:"65%"},children:"Save"})]})]})}var je=a(122),be=a.n(je),me=a(121),fe=a.n(me),he=a(291);function xe(){var e,t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(""),d=Object(l.a)(i,2),j=d[0],h=d[1],x=Object(n.useState)(""),g=Object(l.a)(x,2),w=g[0],y=g[1],I=Object(n.useState)(""),T=Object(l.a)(I,2),P=T[0],E=T[1],N=Object(n.useState)(""),_=Object(l.a)(N,2),z=_[0],A=_[1],R=Object(n.useState)(""),L=Object(l.a)(R,2),W=L[0],M=L[1],F=Object(n.useState)(""),B=Object(l.a)(F,2),V=B[0],U=B[1],H=Object(n.useState)("prueba"),q=Object(l.a)(H,2),J=q[0],X=q[1],K=Object(n.useState)(""),Z=Object(l.a)(K,2),$=Z[0],ee=Z[1],te=r.a.useState({password:"",showPassword:!1}),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ce=r.a.useState({repassword:"",showRePassword:!1}),se=Object(l.a)(ce,2),pe=se[0],je=se[1],me=Object(n.useState)({invoice:!0,ticket:!0,note:!0}),xe=Object(l.a)(me,2),Oe=xe[0],ve=xe[1],ge=function(e){ve(Object(f.a)(Object(f.a)({},Oe),{},Object(m.a)({},e.target.name,e.target.checked)))},we=Object(v.useToasts)().addToast,ke=Object(p.f)(),ye=function(e){e.preventDefault()},Ce=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ne.password,a=pe.repassword,c){e.next=5;break}return we("Please Enter Name",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 5:if(j){e.next=8;break}return we("Please Enter Ruc",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 8:if(w){e.next=11;break}return we("Please Enter Id Sucursal",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 11:if(P){e.next=14;break}return we("Please Enter Token",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 14:if(z){e.next=17;break}return we("Please Enter Email",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 17:if(V){e.next=20;break}return we("Please Enter Id Vendor",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 20:if(J){e.next=23;break}return we("Please Enter Tipo Proceso",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 23:if(W){e.next=26;break}return we("Please Enter Credit",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 26:if($){e.next=29;break}return we("Please Enter Paid",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 29:if(t===a){e.next=32;break}return we("Please Confirm Password",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 32:if(Oe.invoice||Oe.ticket||Oe.note){e.next=35;break}return we("Please Check Doc Types",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 35:return n={name:c,ruc:j,branch:w,token:P,email:z,vendor:V,process:J,credit:W,paid:$,password:t,docType:Oe},e.next=38,b.a.post("/users/register",n);case 38:200===(r=e.sent).data.status?ke.push("/admin"):we(r.data.msg,{appearance:"error",autoDismiss:!0});case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(S.a,{component:"form",sx:{display:"flex",flexWrap:"wrap",p:3},noValidate:!0,autoComplete:"on",children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){ke.push("/admin")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsxs)("div",{children:[Object(D.jsx)(ie.a,{sx:{my:1,color:"#1976d2",fontWeight:"600"},children:"New User"}),Object(D.jsx)(Y.a,{required:!0,autoComplete:"email",variant:"standard",label:"Name",focused:!0,size:"small",fullWidth:!0,sx:{mb:1},value:c,onChange:function(e){return s(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Ruc",type:"number",variant:"standard",size:"small",sx:{mr:1,my:1,width:"60%"},value:j,onChange:function(e){return h(e.target.value)},focused:!0}),Object(D.jsx)(Y.a,{label:"Id Sucursal",variant:"standard",type:"number",size:"small",sx:{ml:1,my:1,width:"35%"},value:w,onChange:function(e){return y(e.target.value)},focused:!0}),Object(D.jsx)(Y.a,{label:"Token",size:"small",variant:"standard",focused:!0,fullWidth:!0,sx:{my:1},value:P,onChange:function(e){return E(e.target.value)}}),Object(D.jsx)(Y.a,{required:!0,label:"Email",size:"small",variant:"standard",fullWidth:!0,sx:{my:1},focused:!0,value:z,onChange:function(e){return A(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Id Vendor",type:"number",variant:"standard",size:"small",sx:{my:1,mr:1,width:"40%"},focused:!0,value:V,onChange:function(e){return U(e.target.value)}}),Object(D.jsxs)(ue.a,{sx:{my:1,ml:1,width:"55%"},size:"small",focused:!0,variant:"standard",children:[Object(D.jsx)(ie.a,{children:"Tipo Proceso"}),Object(D.jsxs)(le.a,{value:J,onChange:function(e){return X(e.target.value)},label:"Age",children:[Object(D.jsx)(oe.a,{value:"prueba",children:"Prueba"}),Object(D.jsx)(oe.a,{value:"other",children:"Other"})]})]}),Object(D.jsxs)(ue.a,{sx:{my:1},fullWidth:!0,variant:"standard",size:"small",focused:!0,required:!0,children:[Object(D.jsx)(ie.a,{children:"Password"}),Object(D.jsx)(he.a,{type:ne.showPassword?"text":"password",value:ne.password,onChange:(e="password",function(t){re(Object(f.a)(Object(f.a)({},ne),{},Object(m.a)({},e,t.target.value)))}),endAdornment:Object(D.jsx)(G.a,{position:"end",children:Object(D.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){re(Object(f.a)(Object(f.a)({},ne),{},{showPassword:!ne.showPassword}))},onMouseDown:ye,edge:"end",children:ne.showPassword?Object(D.jsx)(fe.a,{color:"info"}):Object(D.jsx)(be.a,{color:"info"})})})})]}),Object(D.jsxs)(ue.a,{sx:{my:1},fullWidth:!0,variant:"standard",size:"small",focused:!0,children:[Object(D.jsx)(ie.a,{children:"Confirm Password"}),Object(D.jsx)(he.a,{type:pe.showRePassword?"text":"password",value:pe.repassword,onChange:function(e){return function(t){je(Object(f.a)(Object(f.a)({},pe),{},Object(m.a)({},e,t.target.value)))}}("repassword"),endAdornment:Object(D.jsx)(G.a,{position:"end",children:Object(D.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){je(Object(f.a)(Object(f.a)({},pe),{},{showRePassword:!pe.showRePassword}))},onMouseDown:ye,edge:"end",color:"info",children:pe.showRePassword?Object(D.jsx)(fe.a,{color:"info"}):Object(D.jsx)(be.a,{color:"info"})})}),label:"Password"})]}),Object(D.jsx)(Y.a,{label:"Id Credit",type:"number",variant:"standard",sx:{my:1,mr:2,width:"45%"},size:"small",focused:!0,value:W,onChange:function(e){return M(e.target.value)}}),Object(D.jsx)(Y.a,{label:"Id Paid",type:"number",variant:"standard",sx:{my:1,ml:2,width:"45%"},size:"small",focused:!0,value:$,onChange:function(e){return ee(e.target.value)}}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:Oe.invoice,onChange:ge,name:"invoice",size:"small"}),label:"Invoice"}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:Oe.ticket,onChange:ge,name:"ticket",size:"small"}),label:"Ticket"}),Object(D.jsx)(Q.a,{control:Object(D.jsx)(de.a,{checked:Oe.note,onChange:ge,name:"note",size:"small"}),label:"Note"}),Object(D.jsx)(O.a,{onClick:Ce,variant:"contained",sx:{my:2,width:"65%"},children:"Save"})]})]})}a(226);var Oe=a(98),ve=a.n(Oe),ge=a(151),we=a(152);function ke(e){var t=e.match.params.id,a=Object(p.f)(),r=Object(n.useContext)(g),c=r.loginStatus,s=r.pdf,i=r.conf,d=Object(n.useState)({name:"",doc:""}),j=Object(l.a)(d,2),m=j[0],x=j[1],v=c.customerId;Object(n.useEffect)((function(){if(void 0===navigator.share&&"http:"===window.location.protocol&&window.location.replace(window.location.href.replace(/^http:/,"https:")),""!==s.toString())return b.a.get("/customers/get/"+v).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(Object(f.a)(Object(f.a)({},m),{},{name:t.data[0].name,doc:t.data[0].doc}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){x({name:"",doc:""})};a.push("/translist")}),[]);var w=new Date,y=Object(n.useRef)(),C=Object(ge.useReactToPrint)({content:function(){return y.current}}),S=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s||"");case 2:return t=e.sent,e.next=5,t.blob();case 5:if(a=e.sent,n=new File([a],"".concat(m.name?m.name:"Invited",".pdf"),{type:a.type}),!navigator.share){e.next=12;break}return e.next=10,navigator.share({title:"Share",text:"Hello sir.",url:window.location.href,files:[n]}).then((function(){return console.log("Successful share")})).catch((function(e){return console.log("Error in sharing",e)}));case 10:e.next=13;break;case 12:window.alert("system does not support sharing files.");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(h.a)("img")({display:"block",width:"55%",maxWidth:"200px",height:"50%"});return Object(D.jsxs)("div",{className:"confirm",children:[Object(D.jsxs)(L.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(D.jsx)(I,{src:"/check.gif",alt:"CheckImage",sx:{my:"auto"}}),Object(D.jsx)("p",{className:"username",children:m.name?m.name:Object(D.jsx)(D.Fragment,{children:"Invited"})}),Object(D.jsxs)("p",{className:"p-amount",children:[Object(D.jsx)("sup",{children:Object(D.jsx)("sub",{children:"S/"})}),t]}),Object(D.jsx)(ve.a,{format:"Do MMMM YYYY - HH:mm",children:w})]}),Object(D.jsxs)(L.a,{ref:y,container:!0,justifyContent:"space-between",alignItems:"center",direction:"row",sx:{padding:"50px 40px"},children:[Object(D.jsx)(k.a,{"aria-label":"home",onClick:function(){a.push("/translist")},children:Object(D.jsx)("i",{className:"fas fa-home"})}),Object(D.jsx)(k.a,{"aria-label":"share",onClick:S,children:Object(D.jsx)("i",{className:"fas fa-share-alt"})}),Object(D.jsxs)(k.a,{"aria-label":"print",onClick:function(){C()},children:[Object(D.jsx)("i",{className:"fas fa-print"}),Object(D.jsx)("div",{style:{display:"none"},children:Object(D.jsx)("div",{ref:y,style:{padding:"0px",margin:"0px"},children:Object(D.jsx)(we.a,{file:s.toString(),page:1})})})]})]}),Object(D.jsx)(O.a,{onClick:function(){i?a.push("/customer"):a.push("/".concat(m.name?"invoice":"invite"))},sx:{mt:4},variant:"contained",children:"Send Other"})]})}var ye=a(293),Ce=a(301),Se=a(305),De=a(304),Ie=a(300),Te=a(302),Pe=a(303),Ee=a(161),Ne=a(153),_e=a.n(Ne),ze=a(273),Ae=a(154),Re=a.n(Ae),Le=(a(229),r.a.forwardRef((function(e,t){return Object(D.jsx)(ze.a,Object(f.a)({direction:"up",ref:t},e))}))),We=Object(h.a)(ye.a)((function(e){var t=e.theme;return{position:"relative",backgroundColor:"#fcfeffd6",padding:t.spacing(1),textAlign:"left",color:t.palette.text.secondary}})),Me=Object(h.a)("img")({display:"block",width:"30px",heigth:"30px"});function Fe(){var e=Object(p.f)(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(n.useContext)(g),d=i.loginStatus,j=i.setLoginStatus,m=i.setConf,h=i.setPdf,x=Object(n.useState)([]),v=Object(l.a)(x,2),w=v[0],y=v[1],C=Object(n.useState)(0),S=Object(l.a)(C,2),I=S[0],T=S[1];Object(n.useEffect)((function(){return function(){var t=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=localStorage.getItem("auth-token"))){t.next=4;break}return e.push("/"),t.abrupt("return");case 4:return t.next=6,b.a.post("/users/tokenIsValid",null,{headers:{"x-auth-token":a}});case 6:if(!t.sent.data){t.next=13;break}return t.next=10,b.a.get("/users/",{headers:{"x-auth-token":a}});case 10:n=t.sent,j({token:a,email:n.data.email,customerId:""}),b.a.get("/users/getId/"+n.data.email).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){y([])}}),[]),Object(n.useEffect)((function(){return b.a.get("/trans/all/"+w._id).then(function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new Date,n=a.toISOString().slice(0,10),r=0,c=0;c<t.data.length;c++)i=new Date(t.data[c].date).toISOString().slice(0,10),n===i&&(r+=t.data[c].amount);T(r),s(t.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){T(0),s([])}}),[w]);var P=r.a.useState(!0),E=Object(l.a)(P,2),N=E[0],_=E[1],z=r.a.useState(null),A=Object(l.a)(z,2),R=A[0],M=A[1],F=Boolean(R),B=function(){M(null)},V=Object(n.useState)(!1),U=Object(l.a)(V,2),H=U[0],q=U[1],Y=c.length;return Object(D.jsxs)(L.a,{sx:{height:"100vh",color:"white"},container:!0,direction:"column",justifyContent:"flex-start",children:[Object(D.jsxs)(L.a,{item:!0,className:"header",container:!0,spacing:2,dirction:"row",justifyContent:"space-between",sx:{backgroundColor:"#1a1938",p:2},children:[Object(D.jsx)(L.a,{item:!0,xs:2,justifyContent:"space-between",container:!0,children:Object(D.jsx)(Me,{src:W,alt:"logo",sx:{my:"auto"}})}),Object(D.jsxs)(L.a,{item:!0,xs:8,children:[Object(D.jsx)(L.a,{children:w.name?w.name:Object(D.jsx)(O.a,{variant:"filled",onClick:function(){_(!0)},children:"Please be a link"})}),Object(D.jsx)(L.a,{children:w.ruc?"RUC: ".concat(w.ruc):"+51 943204360"})]}),Object(D.jsxs)(L.a,{item:!0,xs:2,justifyContent:"flex-end",container:!0,children:[Object(D.jsx)(k.a,{id:"basic-button","aria-controls":F?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":F?"true":void 0,onClick:function(e){M(e.currentTarget)},sx:{color:"white"},children:Object(D.jsx)(_e.a,{sx:{color:"white"}})}),Object(D.jsxs)(Ee.a,{id:"basic-menu",anchorEl:R,open:F,onClose:B,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(D.jsx)(oe.a,{onClick:B,children:"Profile"}),Object(D.jsx)(oe.a,{onClick:function(){j({token:void 0,email:void 0,customerId:""}),localStorage.setItem("auth-token",""),e.push("/")},children:"Logout"})]})]}),Object(D.jsx)(L.a,{item:!0,xs:12,children:Object(D.jsxs)(We,{children:[Object(D.jsx)("span",{children:"Today"}),Object(D.jsxs)("span",{style:{position:"absolute",right:"10px"},children:["S/\xa0",Object(D.jsx)("span",{children:I.toFixed(2)})]})]})})]}),Object(D.jsx)(L.a,{item:!0,className:"body",children:Object(D.jsx)(ye.a,{sx:{overflow:"hidden",width:"100%"},children:Object(D.jsx)(Ie.a,{sx:{maxHeight:"calc(100vh - 220px)"},children:Object(D.jsxs)(Ce.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(D.jsx)(Te.a,{children:Object(D.jsxs)(Pe.a,{children:[Object(D.jsx)(De.a,{children:"\xdaltimos Movimientos"}),Object(D.jsx)(De.a,{align:"right",children:Object(D.jsx)(O.a,{variant:"text",color:"info",onClick:function(){q((function(e){return!e}))},sx:{fontSize:"13px",p:0},children:"Ver Todos"})})]})}),Object(D.jsx)(Se.a,{children:c.map((function(t,a){return Object(D.jsxs)(Pe.a,{onClick:function(){return a=t.amount,n=t.customerId,r=t.pdfLink,console.log(a,n,r),m(!1),h(r),j(Object(f.a)(Object(f.a)({},d),{},{customerId:n})),void e.push({pathname:"/confirm/"+a});var a,n,r},hover:!0,sx:{"&:last-child td, &:last-child th":{border:0},p:0},children:[Object(D.jsxs)(De.a,{component:"th",scope:"row",sx:{p:1},children:[Object(D.jsx)("strong",{children:t.name}),Object(D.jsxs)("p",{className:"type",children:[t.type,"\xa0::\xa0",Object(D.jsx)(ve.a,{format:"Do MMMM - HH:mm",children:t.date})]})]}),Object(D.jsxs)(De.a,{align:"right",children:["S/\xa0\xa0",t.amount]})]},a)})).reverse().slice(0,!0===H?Y:8)})]})})})}),Object(D.jsx)(L.a,{item:!0,className:"footer",sx:{position:"fixed",bottom:"0px",width:"100%"},children:Object(D.jsx)(O.a,{variant:"contained",onClick:function(){e.push("/customer")},color:"info",sx:{marginBottom:"10px",width:"60%"},children:"SEND"})}),Object(D.jsxs)(te.a,{open:!w.name&&N,TransitionComponent:Le,keepMounted:!0,onClose:function(){_(!1)},fullWidth:!0,"aria-describedby":"alert-dialog-slide-description",children:[Object(D.jsx)(ce.a,{sx:{mx:"auto"},color:"primary",children:"Go to the pro version!!"}),Object(D.jsx)(ne.a,{children:Object(D.jsx)(re.a,{sx:{fontSize:"80%"},id:"alert-dialog-slide-description",children:"Welcome to Fino: you are currently in a trial version. If you want to use the pro version, please contact our phone numbers: +51 943204360 or press the button bellow."})}),Object(D.jsx)(ae.a,{sx:{mx:"auto"},children:Object(D.jsx)(O.a,{sx:{p:1,fontSize:"70%"},startIcon:Object(D.jsx)(Re.a,{color:"white",sx:{fontSize:"80px"},fontSize:"large"}),color:"success",variant:"contained",onClick:function(){window.open("https://api.whatsapp.com/send?phone=+51943204360&text=Hola,%20deseo%20soporte%20para%20integrar%20mi%20sistema%20a%20FINO.")},children:"Contactar por WhatsApp"})})]})]})}var Be=a(157),Ve=a.n(Be),Ue=a(156),He=a.n(Ue),qe=a(155),Ye=a.n(qe),Ge=a(64),Je=(a(230),Object(h.a)(x.c)((function(e){var t=e.theme;return{"label + &":{marginTop:t.spacing(3)},"& .MuiInputBase-input":{position:"relative",backgroundColor:"white",fontSize:14,width:"100%",padding:"12px 16px",transition:t.transitions.create(["border-color","background-color","box-shadow","border-width"]),"&:focus":{borderColor:"#FA4616",borderWidth:"1px"}}}})));function Xe(){var e=Object(p.f)(),t=Object(n.useContext)(g),a=t.loginStatus,c=t.setLoginStatus,s=Object(v.useToasts)().addToast,i=Object(n.useState)([]),d=Object(l.a)(i,2),j=d[0],m=d[1],h=Object(n.useState)({sellerId:"",name:"",doc:"",direction:""}),w=Object(l.a)(h,2),y=w[0],I=w[1],T=Object(n.useState)({invoice:!1,ticket:!1,note:!1}),P=Object(l.a)(T,2),E=P[0],N=P[1];Object(n.useEffect)((function(){return function(){var t=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=localStorage.getItem("auth-token"))){t.next=4;break}return e.push("/"),t.abrupt("return");case 4:return t.next=6,b.a.post("/users/tokenIsValid",null,{headers:{"x-auth-token":a}});case 6:if(!t.sent.data){t.next=14;break}return t.next=10,b.a.get("/users/",{headers:{"x-auth-token":a}});case 10:n=t.sent,c({token:a,email:n.data.email,customerId:""}),b.a.get("/users/getId/"+n.data.email).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(Object(f.a)(Object(f.a)({},y),{},{sellerId:t.data._id})),b.a.get("/customers/all/"+t.data._id).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b.a.get("/users/getId/"+n.data.email).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(Object(f.a)(Object(f.a)({},E),{},{invoice:t.data.docType[0],ticket:t.data.docType[1],note:t.data.docType[2]}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){I([]),m([]),N({})}}),[]);var _=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.name){e.next=3;break}return s("Please enter name",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),e.abrupt("return");case 3:if(y.doc){e.next=6;break}return s("Please enter doc number",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),e.abrupt("return");case 6:if(y.direction){e.next=9;break}return s("Please enter direction",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),e.abrupt("return");case 9:return e.next=11,b.a.post("/customers/create",y);case 11:200===(t=e.sent).data.status?(I(Object(f.a)(Object(f.a)({},y),{},{doc:"",name:"",direction:""})),b.a.get("/customers/all/"+y.sellerId).then(function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data.pop(),z(a.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):s(t.data.msg,{appearance:"error",autoDismiss:!0});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(t){b.a.get("/customers/get/"+t).then(function(){var n=Object(u.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:E.ticket||E.note||8!==r.data[0].doc.length?(c(Object(f.a)(Object(f.a)({},a),{},{customerId:t})),localStorage.setItem("customerId",t),e.push("/invoice")):(s("You can't invoice a DNI!!! Please link to admin.",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),U(!1),M(""),b.a.get("/customers/all/"+y.sellerId).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},A=Object(n.useState)(""),R=Object(l.a)(A,2),W=R[0],M=R[1],F=Object(n.useState)(!1),B=Object(l.a)(F,2),V=B[0],U=B[1],H=Object(n.useState)(""),q=Object(l.a)(H,2),G=q[0],J=q[1],X=function(e){return function(){b.a.delete("/customers/delete/"+e).then((function(e){"success"===e.data.msg?s("Deleted Successfully",{appearance:"success",autoDismiss:!0}):s("Sorry, Operation is failure",{appearance:"error",autoDismiss:!0})}))}},K=r.a.useState(!1),Q=Object(l.a)(K,2),Z=Q[0],$=Q[1],ee=Object(n.useState)({id:"",name:"",direction:""}),re=Object(l.a)(ee,2),se=re[0],ie=re[1],oe=function(e,t,a){return function(){ie({id:e,name:t,direction:a}),$(!0)}},ue=function(){$(!1)},le=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("/customers/update",{id:se.id,name:se.name,direction:se.direction});case 2:200===(t=e.sent).status?(a=j.map((function(e){return se.id===e.id?Object(f.a)(Object(f.a)({},e),{},{name:se.name,direction:se.direction}):e})),m(a),ue()):s(t.data.msg,{appearance:"error",autoDismiss:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(S.a,{sx:{height:"100vh",backgroundColor:"#EDEDF5"},children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){e.push("/translist")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsx)("p",{style:{letterSpacing:"3px",fontWeight:"500",paddingBottom:"20px",fontSize:"20px",color:"#1976d2",paddingTop:"40px"},children:"CUSTOMERS"}),Object(D.jsxs)(ye.a,{sx:{px:1,mx:1,mb:0,display:"flex",alignItems:"center",marginBottom:"13px",boxShadow:"unset",border:"1px solid #f5f5f5"},children:[Object(D.jsx)(x.c,{sx:{ml:1,flex:1},placeholder:"Search Name or Doc in list",inputProps:{"aria-label":"search google maps"},onChange:function(e){return function(e){if(e.preventDefault(),M(e.target.value),e.target.value){for(var t=e.target.value.toString().toLowerCase(),a=[],n=0;n<j.length;n++)(j[n].name.toString().toLowerCase().includes(t)||j[n].doc.toString().toLowerCase().includes(t))&&a.push(j[n]);m(a)}else U(!1),b.a.get("/customers/all/"+y.sellerId).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I(Object(f.a)(Object(f.a)({},y),{},{doc:"",name:"",direction:""}))}(e)},value:W}),Object(D.jsx)(k.a,{onClick:function(){if(J(""),I(Object(f.a)(Object(f.a)({},y),{},{doc:W,name:"",direction:""})),U(!0),8!==W.length&&11!==W.length&&(s("Doc number is incorrect",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),J("RUC OR DNI, does not exist, type correctly.\n            If it is another type of document, type manually.")),8===W.length){var e="https://facturalahoy.com/api/persona/"+W.toString()+"/facturalaya_evalles_orE26f69ngmqmqB";fetch(e).then((function(e){return e.json()})).then((function(e){"ok"===e.respuesta?I(Object(f.a)(Object(f.a)({},y),{},{doc:e.dni,name:e.nombre,direction:""})):(s("Doc number is incorrect",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),J("RUC OR DNI, does not exist, type correctly.\n                    If it is another type of document, type manually."))})).catch((function(e){console.log(e)}))}if(11===W.length){var t="https://facturalahoy.com/api/empresa/"+W.toString()+"/facturalaya_evalles_orE26f69ngmqmqB";fetch(t).then((function(e){return e.json()})).then((function(e){"ok"===e.respuesta?I(Object(f.a)(Object(f.a)({},y),{},{doc:e.ruc,name:e.razon_social,direction:e.direccion.trim()})):(s("Doc number is incorrect",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),J("RUC OR DNI, does not exist, type correctly.\n                        If it is another type of document, type manually."))})).catch((function(e){console.log(e)}))}},sx:{p:"10px"},"aria-label":"search",children:Object(D.jsx)(Ve.a,{color:"primary"})})]}),!V&&Object(D.jsx)(ye.a,{sx:{overflow:"hidden",width:"100%",backgroundColor:"#EDEDF5",mt:"0",boxShadow:"0px 0px 0px 0px"},children:Object(D.jsx)(Ie.a,{sx:{mx:"auto",width:"95%",Index:"0",maxHeight:"calc(100vh - 225px)"},children:Object(D.jsx)(Ce.a,{"aria-label":"sticky table",children:Object(D.jsx)(Se.a,{children:Object(D.jsx)(Ge.SwipeableList,{sx:{p:0,m:0},type:Ge.Type.IOS,children:j.map((function(e,t){return Object(D.jsx)(Ge.SwipeableListItem,{trailingActions:(a=e.id,n=e.name,r=e.direction,Object(D.jsxs)(Ge.TrailingActions,{sx:{overflow:"hidden"},children:[Object(D.jsx)(Ge.SwipeAction,{sx:{width:"10px"},onClick:oe(a,n,r),children:Object(D.jsx)(O.a,{variant:"text",endIcon:Object(D.jsx)(Ye.a,{size:"large"})})}),Object(D.jsx)(Ge.SwipeAction,{destructive:!0,onClick:X(a),children:Object(D.jsx)(O.a,{variant:"text",startIcon:Object(D.jsx)(He.a,{size:"large"})})})]})),children:Object(D.jsxs)(De.a,{onClick:function(){return z(e.id)},scope:"row",sx:{p:1,pl:1,mb:1,width:"100%",borderLeft:"3px solid grey"},children:[Object(D.jsx)("strong",{children:e.name}),Object(D.jsx)("p",{children:e.doc})]},t)},t);var a,n,r}))})})})})}),V&&Object(D.jsxs)("div",{children:[Object(D.jsx)("p",{style:{color:"#1976d2",fontSize:"14px",marginTop:"15px",padding:"0px 50px"},children:G}),Object(D.jsx)(L.a,{container:!0,direction:"column",children:Object(D.jsx)(Je,{placeholder:"Enter Name",name:"description",sx:{width:"85%",mx:"auto"},value:y.name,onChange:function(e){I(Object(f.a)(Object(f.a)({},y),{},{name:e.target.value}))},disabled:""===G})}),Object(D.jsx)(L.a,{container:!0,direction:"column",sx:{mt:2},children:Object(D.jsx)(Je,{placeholder:"Enter Direction",name:"description",sx:{width:"85%",mx:"auto"},value:y.direction,onChange:function(e){I(Object(f.a)(Object(f.a)({},y),{},{direction:e.target.value}))}})}),Object(D.jsx)(O.a,{variant:"contained",sx:{marginTop:"40px"},onClick:_,className:"btn-action",children:"Select"})]}),Object(D.jsx)(L.a,{item:!0,className:"footer",sx:{position:"fixed",bottom:"0px",width:"100%"},children:!V&&Object(D.jsx)(O.a,{variant:"contained",sx:{mb:2,width:"80%"},onClick:function(){E.ticket||E.note?e.push("/invite"):(s("Now You can't use DNI and Invite",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"}),U(!1),M(""),b.a.get("/customers/all/"+y.sellerId).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"INVITADO"})}),Object(D.jsxs)(te.a,{open:Z,onClose:ue,children:[Object(D.jsx)(ce.a,{children:"Edit Customer"}),Object(D.jsxs)(ne.a,{children:[Object(D.jsx)(Y.a,{autoFocus:!0,focused:!0,margin:"dense",id:"name",label:"Name",type:"email",fullWidth:!0,variant:"standard",value:se.name,onChange:function(e){return ie(Object(f.a)(Object(f.a)({},se),{},{name:e.target.value}))}}),Object(D.jsx)(Y.a,{margin:"dense",id:"direction",focused:!0,label:"direction",type:"text",fullWidth:!0,variant:"standard",value:se.direction,onChange:function(e){return ie(Object(f.a)(Object(f.a)({},se),{},{direction:e.target.value}))}})]}),Object(D.jsxs)(ae.a,{children:[Object(D.jsx)(O.a,{onClick:ue,children:"Cancel"}),Object(D.jsx)(O.a,{onClick:le,children:"Change"})]})]})]})}a(231);function Ke(){var e=Object(n.useContext)(g),t=e.setLoginStatus,a=e.setPdf,r=e.setConf,c=Object(n.useState)({amount:"",name:"Invited",doc:"",direction:"",sellerId:"",customerId:"",type:"",pdfLink:""}),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(v.useToasts)().addToast,h=Object(p.f)(),x=Object(n.useState)({invoice:!1,ticket:!1,note:!1}),w=Object(l.a)(x,2),y=w[0],I=w[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(a=localStorage.getItem("auth-token"))){e.next=4;break}return h.push("/"),e.abrupt("return");case 4:return e.next=6,b.a.post("/users/tokenIsValid",null,{headers:{"x-auth-token":a}});case 6:if(!e.sent.data){e.next=13;break}return e.next=10,b.a.get("/users/",{headers:{"x-auth-token":a}});case 10:n=e.sent,t({token:a,email:n.data.email,customerId:""}),b.a.get("/users/getId/"+n.data.email).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(Object(f.a)(Object(f.a)({},y),{},{invoice:t.data.docType[0],ticket:t.data.docType[1],note:t.data.docType[2]})),d(Object(f.a)(Object(f.a)({},i),{},{sellerId:t.data._id})),t.data.docType[0]||!t.data.docType[1]||t.data.docType[2]||(d(Object(f.a)(Object(f.a)({},i),{},{type:"ticket",sellerId:t.data._id})),I(Object(f.a)(Object(f.a)({},y),{},{ticket:!1}))),t.data.docType[0]||t.data.docType[1]||!t.data.docType[2]||(d(Object(f.a)(Object(f.a)({},i),{},{type:"note",sellerId:t.data._id})),I(Object(f.a)(Object(f.a)({},y),{},{note:!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var T=Object(n.useState)(2),E=Object(l.a)(T,2),N=E[0],_=E[1],z=Object(P.c)((function(e){return e.slide})),A=Object(n.useState)([]),R=Object(l.a)(A,2),W=R[0],M=R[1],F=[],V=function(){for(var e=function(e){F.push(W.filter((function(t){return t.index===e})).pop())},t=0;t<N-1;t++)e(t)},U=Object(n.useState)(0),H=Object(l.a)(U,2),q=H[0],Y=H[1];Object(n.useEffect)((function(){M((function(e){return[].concat(Object(B.a)(e),[z])}))}),[z]),Object(n.useEffect)((function(){V(),function(){for(var e=0,t=0;t<F.length;t++)void 0===F[t]||(e+=F[t].count*Number(F[t].amount));Y(e.toFixed(2))}()}),[W]),Object(n.useEffect)((function(){d(Object(f.a)(Object(f.a)({},i),{},{amount:q.toString()}))}),[q]);function G(){return(G=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("note"===n?"https://facturavirtual.pe/facturacion/api/procesar_nota_venta":"https://facturavirtual.pe/facturacion/api/procesar_venta",t).then((function(e){return e.json()})).then((function(e){var t=e.url_absoluta_ticket;a(t.toString()),d(Object(f.a)(Object(f.a)({},i),{},{pdfLink:t}));var n=Object(f.a)(Object(f.a)({},i),{},{pdfLink:t.toString()});b.a.post("/trans/create",n).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status&&(r(!0),h.push({pathname:"/confirm/"+i.amount}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(){j("Some errors occured",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return function(){Y(),F.fill(null),M(null),_(2)}}),[]),Object(D.jsxs)(S.a,{sx:{flexGrow:1,width:"100%",height:"100%",backgroundColor:"white"},children:[Object(D.jsx)(k.a,{color:"primary","aria-label":"back",onClick:function(){h.push("/customer")},sx:{position:"absolute",top:"10px",right:"10px"},children:Object(D.jsx)(C.a,{})}),Object(D.jsxs)(L.a,{container:!0,direction:"column",sx:{mt:8},justifyContent:"space-between",alignItems:"center",children:[Object(D.jsx)(L.a,{item:!0,children:Object(D.jsx)("p",{className:"doc",children:"Invited"})}),Object(D.jsx)(L.a,{sx:{width:"100%",mt:1},item:!0,children:Object(D.jsx)(Z.a,{spaceBetween:0,slidesPerView:1,onReachEnd:function(){_((function(e){return e+1}))},children:new Array(N).fill(null).map((function(e,t){return Object(D.jsx)(Z.b,{children:Object(D.jsx)(J,{index:t})},t)}))})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:2},children:Object(D.jsxs)(K.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",sx:{pl:2},children:[y.ticket&&Object(D.jsx)(Q.a,{name:"type",value:"ticket",control:Object(D.jsx)(X.a,{size:"small"}),label:"Ticket",onChange:function(e){return d(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))}}),y.note&&Object(D.jsx)(Q.a,{name:"type",value:"note",control:Object(D.jsx)(X.a,{size:"small"}),label:"Note",onChange:function(e){return d(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e.target.name,e.target.value)))}})]})}),Object(D.jsx)(L.a,{item:!0,sx:{mt:4},children:Object(D.jsxs)("p",{className:"total",children:["Total S/",q]})}),Object(D.jsx)(L.a,{item:!0,sx:{width:"60%",mt:1},children:Object(D.jsx)(O.a,{onClick:function(e){if(i.amount)if(V(),void 0!==F[0]){for(var t=0;t<F.length;t++)if(1===F[t].count&&"0"===F[t].amount);else{if(""===F[t].description)return void j("Please Enter Description",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"});if("0"===F[t].amount)return void j("Please Enter amount",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"})}i.type?(a("http://example.com"),b.a.get("/users/get/"+i.sellerId).then((function(e){!function(e,t){G.apply(this,arguments)}($(F,i,e.data),i.type)}))):j("Please Select Type",{appearance:"info",autoDismiss:!0,autoDismissTimeout:2e3,placement:"top-center"})}else j("Please Enter Description",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"});else j("Please Enter Amount",{appearance:"info",autoDismissTimeout:2e3,autoDismiss:!0,placement:"top-center"})},fullWidth:!0,variant:"contained",children:""===i.type?"Send":i.type.toUpperCase()})})]})]})}function Qe(){var e=Object(n.useState)({token:void 0,email:void 0,customerId:""}),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,b.a.post("/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,b.a.get("/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,r({token:t,email:a.data.email,customerId:""});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],j=s[1],m=Object(n.useState)(!0),f=Object(l.a)(m,2),h=f[0],x=f[1];return Object(D.jsx)(d.a,{children:Object(D.jsx)(g.Provider,{value:{loginStatus:a,setLoginStatus:r,pdf:i,setPdf:j,conf:h,setConf:x},children:Object(D.jsx)(v.ToastProvider,{children:Object(D.jsxs)(p.c,{children:[Object(D.jsx)(p.a,{exact:!0,path:"/",component:F}),Object(D.jsx)(p.a,{exact:!0,path:"/login",component:T}),Object(D.jsx)(p.a,{exact:!0,path:"/register",component:R}),Object(D.jsx)(p.a,{exact:!0,path:"/invoice",component:ee}),Object(D.jsx)(p.a,{exact:!0,path:"/admin",component:se}),Object(D.jsx)(p.a,{exact:!0,path:"/admin/edit/:id",component:pe}),Object(D.jsx)(p.a,{exact:!0,path:"/admin/new",component:xe}),Object(D.jsx)(p.a,{exact:!0,path:"/confirm/:id",component:ke}),Object(D.jsx)(p.a,{exact:!0,path:"/translist",component:Fe}),Object(D.jsx)(p.a,{exact:!0,path:"/customer",component:Xe}),Object(D.jsx)(p.a,{exact:!0,path:"/invite",component:Ke})]})})})})}var Ze=a(71),$e=a(158),et=a(159),tt={currentEmail:"",customerId:""},at={currentData:"data"},nt={},rt=Object(Ze.combineReducers)({email:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var a=Object(f.a)(Object(f.a)({},e),{},{currentEmail:t.payload.email,customerId:t.payload.customerId});return a;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(f.a)(Object(f.a)({},e),{},{currentData:t.payload});default:return e}},slide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.payload;default:return e}}}),ct=Object($e.composeWithDevTools)(Object(Ze.applyMiddleware)(et.a)),st=function(){var e=Object(Ze.createStore)(rt,ct);return e};var it=function(){var e=st();return Object(D.jsx)(P.a,{store:e,children:Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(Qe,{})})})},ot=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,307)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(D.jsx)(it,{}),document.getElementById("root")),ot()}},[[232,1,2]]]);
//# sourceMappingURL=main.436dedfd.chunk.js.map